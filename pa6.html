<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>PA6: D3 Visual Animation</title>
    <script src="d3.min.js" charset="utf-8"></script>
    <style type="text/css">
      #control-buttons{
        width: 800px;
        height: 40px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <svg width="800" height="400" boarder="1">
      <rect id="stage" x="0" y="0" width="800" height="400" stroke="black" stroke-width="1" fill-opacity="0.0"/>
        <circle class="led" led-num="1" cx="50" cy="50" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="2" cx="150" cy="50" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="3" cx="250" cy="50" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="4" cx="350" cy="50" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="5" cx="450" cy="50" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="6" cx="550" cy="50" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="7" cx="650" cy="50" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="8" cx="750" cy="50" r="40" stroke="black" stroke-width="1" fill="white"/>

        <circle class="led" led-num="9" cx="50" cy="150" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="10"  cx="150" cy="150" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="11"  cx="250" cy="150" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="12"  cx="350" cy="150" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="13"  cx="450" cy="150" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="14"  cx="550" cy="150" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="15"  cx="650" cy="150" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="16"  cx="750" cy="150" r="40" stroke="black" stroke-width="1" fill="white"/>

        <circle class="led" led-num="17"  cx="50" cy="250" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="18"  cx="150" cy="250" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="19"  cx="250" cy="250" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="20"  cx="350" cy="250" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="21"  cx="450" cy="250" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="22"  cx="550" cy="250" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="23"  cx="650" cy="250" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="24"  cx="750" cy="250" r="40" stroke="black" stroke-width="1" fill="white"/>

        <circle class="led" led-num="25"  cx="50" cy="350" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="26"  cx="150" cy="350" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="27"  cx="250" cy="350" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="28"  cx="350" cy="350" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="29"  cx="450" cy="350" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="30"  cx="550" cy="350" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="31"  cx="650" cy="350" r="40" stroke="black" stroke-width="1" fill="white"/>
        <circle class="led" led-num="32"  cx="750" cy="350" r="40" stroke="black" stroke-width="1" fill="white"/>
    </svg>
    </br>
    <div id="control-buttons">
      <button id="start-reset" type="button" onclick="startButton()">Start</button>
      <button id="chime" type="button" onclick="chime()">Chime</button>
    </div>
  </body>
  <script>
    function startButton(){
      button = document.getElementById("start-reset");
      switch(button.innerHTML){
          case "Start":
          button.innerHTML = "Reset";
          break;
        case "Reset":
          button.innerHTML = "Start";
          break;
      }
      animationMain();
    }

    function chime(){
      //A responsive event triger to send to the animation sequence
      //An idea: every odd chime the colors of all the LED's become a shade brighter; every even chime the speed of the animation quickens
    }

    function animationMain(){
      marqueeSequence("Blue", 10);
      //Main deterministic animation driver
    }

    function marqueeSequence(color, timeSteps){
      var LEDs = d3.selectAll(".led");
      for(var i = 0; i<timeSteps; i++){
        LEDs.each(function(d, j){
          var currentCircle = d3.select(this);
          console.log(this);
          if(i % 2 == 0){
            if(j % 2 == 0){
              currentCircle.attr("fill", color);
            } else{
              currentCircle.attr("fill", "white");
            }
          } else {
            if(j % 2 == 1){
              currentCircle.attr("fill", "white");
            } else {
              currentCircle.attr("fill", color);
            }
          }
        }); 
        
      }
    }
  </script>
</html>